--[[	© 2011-2012 CloudSixteen.com do not share, re-distribute or modify	this file without the permission of its owner(s).
	Conna Wiles (connawiles@gmail.com)--]]lighting = {};lighting.m_rayHandler = nil;local MAX_RAYS = 32;function lighting.Init(ambientLight)	if (lighting.m_rayHandler) then		lighting.Destroy();	end;		lighting.m_rayHandler = RayHandler(display.GetW(), display.GetH());	lighting.m_rayHandler:setAmbientLight(ambientLight.r, ambientLight.g, ambientLight.b, ambientLight.a);	lighting.m_rayHandler:setGammaCorrection(true);	lighting.m_rayHandler:useDiffuseLight(true);	lighting.m_rayHandler:setCulling(true);	lighting.m_rayHandler:setBlurNum(1);end;function lighting.Destroy()	if (lighting.m_rayHandler) then		lighting.m_rayHandler:dispose();		lighting.m_rayHandler = nil;	end;end;function lighting.AddPoint(color, distance, position)	if (not lighting.m_rayHandler) then return; end;	return PointLight(lighting.m_rayHandler, MAX_RAYS, color, distance, position.x, position.y);end;function lighting.AddDirectional(color, angle)	if (not lighting.m_rayHandler) then return; end;	return DirectionalLight(lighting.m_rayHandler, MAX_RAYS, color, angle);end;function lighting.AddCone(color, distance, position, direction, coneDegree)	if (not lighting.m_rayHandler) then return; end;	return ConeLight(lighting.m_rayHandler, MAX_RAYS, color, distance, position.x, position.y, direction, coneDegree);end;function lighting.UpdateAndRender()	if (lighting.m_rayHandler) then		lighting.m_rayHandler:updateCamera();		return lighting.m_rayHandler:updateAndRender();	end;end;